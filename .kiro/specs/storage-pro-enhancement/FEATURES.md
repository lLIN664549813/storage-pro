# Storage Pro 功能说明文档

## 版本信息
- **当前版本**: v1.1.0
- **更新日期**: 2025-12-31
- **状态**: 迭代 1 已完成

---

## 🎯 迭代 1 新增功能

### 1. 搜索与过滤系统

#### 1.1 基础搜索
- **功能**: 在 storage 数据中搜索关键字
- **使用方法**: 在搜索框中输入关键字，系统会实时过滤显示匹配的项
- **特性**:
  - 支持搜索键名、值或两者
  - 自动防抖（300ms），优化性能
  - 实时显示搜索结果数量

#### 1.2 高级搜索选项
点击"高级"按钮展开更多搜索选项：

**搜索范围**
- 键名和值：同时搜索键名和值
- 仅键名：只在键名中搜索
- 仅值：只在值中搜索

**搜索选项**
- ✅ 正则表达式：使用正则表达式进行模式匹配
- ✅ 区分大小写：执行大小写敏感搜索
- ✅ JSON 深度搜索：搜索 JSON 对象内部的字段

**示例**：
```javascript
// 搜索所有以 "user_" 开头的键
正则表达式: ^user_

// 搜索 JSON 中包含 "admin" 的项
深度搜索: admin
```

#### 1.3 数据类型过滤
按数据类型筛选：
- 字符串 (string)
- 数字 (number)
- JSON 对象 (json)
- 布尔值 (boolean)
- 空值 (null)

#### 1.4 大小范围过滤
按数据大小（字节）筛选：
- 设置最小值：只显示大于等于该大小的数据
- 设置最大值：只显示小于等于该大小的数据

#### 1.5 搜索历史
- **查看历史**: 点击 📜 按钮查看最近 20 条搜索记录
- **重放搜索**: 点击历史记录可快速重放该次搜索
- **清空历史**: 一键清空所有搜索历史

---

### 2. 数据导入导出系统

#### 2.1 导出功能
点击"📤 导出"按钮打开导出对话框。

**导出格式**
- **JSON**: 标准 JSON 格式，易于程序处理
- **CSV**: 表格格式，可用 Excel 打开

**导出选项**
- ✅ 包含元数据：导出时包含时间戳、统计信息等
- ✅ 格式化输出：美化 JSON 输出（仅 JSON 格式）

**导出方式**
- 📥 导出文件：下载为文件
- 📋 复制：复制到剪贴板（JSON 格式）

**导出示例**：

JSON 格式（包含元数据）：
```json
{
  "metadata": {
    "exportedAt": 1735660800000,
    "storageType": "localStorage",
    "totalItems": 5,
    "totalSize": 1024,
    "version": "1.1.0"
  },
  "items": [
    { "key": "user_name", "value": "张三" },
    { "key": "user_email", "value": "zhangsan@example.com" }
  ]
}
```

CSV 格式：
```csv
# Storage Type: localStorage
# Exported At: 2025-12-31T15:00:00.000Z
# Total Items: 5
# Total Size: 1024 bytes

Key,Value,Size (bytes),Type
user_name,张三,6,string
user_email,zhangsan@example.com,22,string
settings,"{""theme"":""dark""}",18,json
```

#### 2.2 导入功能
点击"📥 导入"按钮打开导入对话框。

**支持格式**
- JSON 文件（.json）

**导入模式**
- **合并模式**: 保留现有数据，添加新数据
- **覆盖模式**: ⚠️ 清空现有数据后导入（谨慎使用）

**导入选项**
- ✅ 跳过已存在的键：如果键已存在，则不覆盖

**导入流程**
1. 选择 JSON 文件
2. 选择导入模式
3. 点击"开始导入"
4. 查看导入结果统计

**导入结果**
- ✓ 成功：成功导入的项数
- ⊘ 跳过：因已存在而跳过的项数
- ✗ 失败：导入失败的项数（含错误详情）

**支持的 JSON 格式**：

格式 1：包含元数据
```json
{
  "metadata": { ... },
  "items": [
    { "key": "user_name", "value": "张三" }
  ]
}
```

格式 2：数组格式
```json
[
  { "key": "user_name", "value": "张三" },
  { "key": "user_email", "value": "zhangsan@example.com" }
]
```

格式 3：键值对对象
```json
{
  "user_name": "张三",
  "user_email": "zhangsan@example.com"
}
```

---

## 💡 使用技巧

### 技巧 1: 快速查找特定类型的数据
1. 点击"高级"展开选项
2. 选择数据类型（如 JSON）
3. 系统会只显示该类型的数据

### 技巧 2: 导出搜索结果
1. 先使用搜索功能过滤数据
2. 点击"导出"按钮
3. 导出的文件只包含搜索结果

### 技巧 3: 备份和恢复数据
1. 导出当前数据为 JSON 文件（包含元数据）
2. 需要恢复时，使用"覆盖模式"导入

### 技巧 4: 在不同环境间迁移数据
1. 在环境 A 导出数据
2. 在环境 B 使用"合并模式"导入
3. 启用"跳过已存在的键"避免冲突

### 技巧 5: 使用正则表达式批量查找
```
查找所有 token: token
查找所有以 api_ 开头: ^api_
查找所有包含数字: \d+
查找邮箱地址: \w+@\w+\.\w+
```

---

## ⚠️ 注意事项

### 搜索功能
1. 正则表达式语法错误会导致搜索失败
2. 深度搜索仅对有效的 JSON 数据生效
3. 搜索历史保存在浏览器本地，清除浏览器数据会丢失

### 导出功能
1. CSV 格式可能无法完整表示复杂的 JSON 数据
2. 导出的文件名包含时间戳，避免覆盖
3. 大量数据导出可能需要一些时间

### 导入功能
1. ⚠️ 覆盖模式会清空所有现有数据，请谨慎使用
2. 导入前建议先备份当前数据
3. 导入大文件可能需要较长时间
4. 导入失败的项会在结果中显示错误原因

---

## 🐛 常见问题

### Q1: 搜索没有结果？
- 检查是否启用了"区分大小写"
- 检查搜索范围是否正确
- 尝试关闭"正则表达式"模式

### Q2: 导出的 CSV 文件中文乱码？
- 使用 Excel 打开时选择 UTF-8 编码
- 或使用记事本打开后另存为 UTF-8

### Q3: 导入失败？
- 检查 JSON 文件格式是否正确
- 查看错误详情了解具体原因
- 确保文件大小不超过限制

### Q4: 搜索历史丢失？
- 搜索历史保存在浏览器本地存储
- 清除浏览器数据会导致历史丢失
- 建议定期导出重要的搜索条件

---

## 📞 反馈与支持

如果您在使用过程中遇到问题或有改进建议，请通过以下方式反馈：
- GitHub Issues: [项目地址]/issues
- 邮件: [待定]

---

**文档版本**: v1.0
**最后更新**: 2025-12-31
